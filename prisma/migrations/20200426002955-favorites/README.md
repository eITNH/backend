# Migration `20200426002955-favorites`

This migration has been generated by Torben Ewert at 4/26/2020, 12:29:55 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `eITNH`.`_CourseToUser` (
    `A` int NOT NULL ,
    `B` int NOT NULL 
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `eITNH`.`Course` DROP FOREIGN KEY `Course_ibfk_1`;

CREATE UNIQUE INDEX `_CourseToUser_AB_unique` ON `eITNH`.`_CourseToUser`(`A`,`B`)

CREATE  INDEX `_CourseToUser_B_index` ON `eITNH`.`_CourseToUser`(`B`)

ALTER TABLE `eITNH`.`_CourseToUser` ADD FOREIGN KEY (`A`) REFERENCES `eITNH`.`Course`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `eITNH`.`_CourseToUser` ADD FOREIGN KEY (`B`) REFERENCES `eITNH`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200425172254-init..20200426002955-favorites
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url      = "mysql://eITNH:ZYQhzOml73$7Iw$X@81.169.231.200/eITNH"
 }
 model Auth {
   id                Int     @default(autoincrement()) @id
@@ -31,9 +31,9 @@
   updatedAt       DateTime @updatedAt
   auth            Auth
   courseRequests  Course[] @relation("CourseRequests", references: [id])
   courses         Course[] @relation("Courses", references: [id])
-  favoriteCourses Course[]
+  favoriteCourses Course[] @relation(references: [id])
   courseOffers    Course[] @relation("CourseOffers", references: [id])
   files           File[]
 }
@@ -50,8 +50,9 @@
   description     String?
   start           DateTime
   end             DateTime
   public          Boolean    @default(false)
+  likers          User[]     @relation(references: [id])
   pendingMembers  User[]     @relation("CourseRequests", references: [id])
   acceptedMembers User[]     @relation("Courses", references: [id])
   professors      User[]     @relation("CourseOffers", references: [id])
   files           File[]
```


